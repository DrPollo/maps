angular.module("firstlife.controllers").controller("AppCtrl",["$scope","$state","$rootScope","$ionicHistory","$ionicPopup","$ionicSideMenuDelegate","$translate","$filter","$location","myConfig","MemoryFactory",function(e,o,t,r,a,n,i,s,l,E,c){function g(){o.go("login",{action:"logout"})}e.config=E,e.isLoggedIn=!1,t.currentLang=i.use(),e.apiVersion="API version: "+E.api_version,e.clientVersion="Client version: "+E.version;var u=!1;e.$on("$stateChangeSuccess",function(){u&&console.log("sono in AppCtrl e vengo da ",t.previousState,t.isLoggedIn,t.currentUser),e.user=c.get("user"),e.user?(e.user.displayName&&""!=e.user.displayName?e.displayName=e.user.displayName:1==e.user.type?e.displayName=e.user.first_name.concat(" ").concat(e.user.last_name):2==e.user.type&&(e.displayName=e.user.name),e.isLoggedIn=!0,u&&console.log("Benvenuto",t.currentUser)):(e.username="Guest",e.isLoggedIn=!1,u&&console.log("Non loggato"))}),e.login=function(){o.go("login",{action:"login"})},e.toggleSideLeft=function(){n.toggleLeft()},e.showConfirmLogout=function(){var o="",t="";o=o.concat("<center>").concat(s("translate")("EXIT_MESSAGE")).concat("</center>"),t=t.concat(s("translate")("EXIT_FROM")).concat(" ").concat(config.app_name),e.confirmPopup=a.confirm({title:t,template:o}),e.confirmPopup.then(function(e){e&&g()})},e.langSelector=function(e){i.use(e),t.currentLang=i.use()},e.myMap=function(){e.user&&e.user.id&&l.search("users",e.user.id)}}]);