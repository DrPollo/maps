<ion-header-bar class="modal-header" >
    <div class="bar bar-header">
        <form id="ricerca" name="ricerca" class="item-input-wrapper" ng-init="searchName = ''">
            <i class="icon ion-android-search"></i>
            <input type="search" placeholder="{{'SEARCH'| translate}}" ng-model="searchName">
            <i ng-show="searchName.length > 0" ng-click="searchName = '' " class="icon ion-close"></i>
        </form>
    </div>
</ion-header-bar>
<ion-content class="modal-content">
    <search-results query="searchName" click="click" close="close"></search-results>
    <div class="card list">
        <div class="item item-divider">
            {{'CURRENTLY_ON_MAP'|translate}}
        </div>
        <div class="item" ng-if="filtered.length == 0">
            <span>{{'NOTHING_TO_SEE'|translate}}</span>
        </div>
        <div ng-if="wallArray.length > 0" class="item" ng-repeat="marker in wallArray | orderBy:['-last_update','name'] |filter:searchName as filtered track by $index" >
            <div ng-init="loadChildren(marker)" on-tap="click(marker)">
                <i ng-repeat="icon in marker.icons" class="icon {{icon.icon}}"  style="color:{{icon.color}}">
                </i>
                {{marker.name}} 
                <div class="sublist">
                    <div class="sublist-block" ng-repeat="(key, rel) in markerChildren[marker.id]" ng-if="rel.list.length > 0">
                        <div class="sublist-title">
                            {{rel.childrenLabel |translate}}
                        </div>
                        <div class="sublist-item" ng-repeat="c in rel.list"> 
                            <i ng-repeat="cIcon in c.icons" class="icon {{cIcon.icon}}"  style="color:{{cIcon.color}}">
                            </i>
                            {{c.name}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ion-content>