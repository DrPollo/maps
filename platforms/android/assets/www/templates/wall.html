<ion-view id="wall" class="view">

    <ion-nav-bar>
        <ion-nav-buttons side="left">
            <button ng-if="config.actions.show_menu" id="sideMenuToggler" class="button button-positive button-clear icon ion-navicon" ng-click="toggleSideLeft()"></button>
        </ion-nav-buttons>

        <ion-nav-title>
            <span>Bacheca</span>
        </ion-nav-title>


    </ion-nav-bar>

    <ion-content> 
        <ion-list>
            <div class="bar bar-header item-input-inset">
                <div class="item-input-wrapper">
                    <i class="icon ion-android-search"></i>
                    <input type="search" placeholder="Cerca" ng-model="searchName">
                    <i ng-if="search.value.length > 0" ng-click="clearSearch()" class="icon ion-close"></i>
                </div>
            </div>
            <div ng-repeat="category in map.layers.overlays | orderBy: 'colorIndex' | filter:{name: '!null'} | filter:  differentThan( 'id', 0 ) | filter:searchName track by $index">
                <div class="item item-divider item-checkbox item-icon-left item-icon-right" on-tap="changeVisibility({{category.id}})" ng-style="{'color' : category.color}" >
                    <i class="icon {{category.icon}}"></i> 
                    <span class="dark">{{category.name}}</span>
                    <i class="icon" ng-class="{ 'ion-checkmark-circled': category.visible, 'ion-ios-circle-outline': !category.visible}"></i>
                </div>
                <div ng-show="category.visible">
                    <div ng-repeat="(key,marker) in map.markers | orderBy: 'name' | filter:{name: '!null'} | filter:notEmpty() | filter:contains('categories',category.id) track by $index" class="item">
                        {{marker.name}}
                    </div>
                </div> 
            </div>

        </ion-list>
    </ion-content>

    <ion-footer-bar>
        <button class="button button-clear icon ion-close-round button-positive" on-tap="close()">
        </button>
    </ion-footer-bar>
</ion-view> 